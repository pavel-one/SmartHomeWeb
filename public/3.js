(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{17:function(e,t,o){"use strict";o.r(t);var s={props:["title","errors"],components:{layout:o(2).a},metaInfo:function(){return{title:this.title}},data:function(){return{isCopy:!1,form:{email:this.$page.props.user.email,name:this.$page.props.user.name,password:"",token:this.$page.props.user.token}}},methods:{remove:function(){var e=this;this.$buefy.dialog.confirm({message:"Внимание! Вы точно хотите удалить свой профиль и все связанные с ним данные? После подтверждения, восстановить их будет невозможно!",onConfirm:function(){e.$inertia.delete(e.route("dashboard.delete"))},cancelText:"Закрыть"})},submit:function(){var e=this;this.form.password?this.$buefy.dialog.confirm({message:'Ваш пароль будет изменен на новый, вы уверены? Если вы не хотите менять пароль, вернитесь назад и очистите поле "новый пароль"',onConfirm:function(){e.$inertia.post(e.route("dashboard.update"),e.form)},cancelText:"Закрыть"}):this.$inertia.post(this.route("dashboard.update"),this.form)},copy:function(){this.isCopy||(this.copyToClipboard(this.$page.props.user.token),this.$buefy.notification.open({duration:2e3,message:"Скопировано",position:"is-top-right",type:"is-success",hasIcon:!0}))},token:function(){var e=this;this.$buefy.dialog.confirm({message:"Внимание! Будет сгенерирован новый токен, а это значит что все ваши устройства работающие сейчас, работать перестанут, продолжить?",onConfirm:function(){e.$inertia.get(e.route("dashboard.token"))},cancelText:"Закрыть"})},copyToClipboard:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.isCopy=!0}}},r=o(0),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("layout",{attrs:{hero:!0},scopedSlots:e._u([{key:"hero",fn:function(){return[o("h1",{staticClass:"title"},[e._v("Редактировать профиль")]),e._v(" "),o("h2",{staticClass:"subtitle"},[e._v(e._s(e.$page.props.user.name))])]},proxy:!0}])},[e._v(" "),o("p",{staticClass:"py-3"},[e._v("Вы можете изменить данные своего профиля или удалить его.")]),e._v(" "),o("form",{staticClass:"my-3",on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[o("b-field",{attrs:{type:e.errors.name?"is-danger":"",message:e.errors.name,"label-position":"on-border",label:"Имя"}},[o("b-input",{attrs:{type:"text",maxlength:"30"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("b-field",{attrs:{type:e.errors.email?"is-danger":"",message:e.errors.email,"label-position":"on-border",label:"Email"}},[o("b-input",{attrs:{type:"email",maxlength:"30"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),o("b-field",{attrs:{type:e.errors.token?"is-danger":"",message:e.errors.token,"label-position":"on-border",label:"Токен"}},[o("b-input",{attrs:{disabled:"true",type:"text"},model:{value:e.form.token,callback:function(t){e.$set(e.form,"token",t)},expression:"form.token"}}),e._v(" "),o("div",{staticClass:"buttons"},[o("b-button",{attrs:{type:"is-primary is-light"},on:{click:e.token}},[o("b-icon",{attrs:{icon:"refresh"}})],1),e._v(" "),o("b-button",{attrs:{disabled:e.isCopy,type:"is-primary is-light"},on:{click:e.copy}},[o("b-icon",{attrs:{icon:e.isCopy?"check":"content-copy"}})],1)],1)],1),e._v(" "),o("b-field",{attrs:{type:e.errors.password?"is-danger":"",message:e.errors.password,"label-position":"on-border",label:"Новый пароль"}},[o("b-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),o("div",{staticClass:"buttons"},[o("b-button",{attrs:{"native-type":"submit",type:"is-primary"}},[e._v("Сохранить")]),e._v(" "),o("b-button",{attrs:{type:"is-danger"},on:{click:e.remove}},[e._v("Удалить профиль")])],1)],1)])}),[],!1,null,null,null);t.default=a.exports}}]);